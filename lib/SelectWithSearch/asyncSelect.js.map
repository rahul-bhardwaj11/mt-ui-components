{"version":3,"sources":["../../src/SelectWithSearch/asyncSelect.js"],"names":["initialCache","options","hasMore","isLoading","AsyncSelect","props","initialOptionsCache","state","search","optionsCache","selectedItems","showSelectedValues","menuIsOpen","showButton","showInput","inputValue","oldProps","cacheUniq","setState","currentOptions","prevState","loadOptions","__loadOptions","concat","isMulti","buttonMaxWidth","buttonWidth","normalizeOption","selectProps","onChange","onCheckboxClick","hideSelectedOptions","components","Option","optionWithCheckBox","MultiValueContainer","handleDisplayValue","Menu","buildMenu","Control","handleControl","value","closeMenuOnSelect","controlShouldRenderValue","isSearchable","autoFocus","onBlur","onDone","Input","handleInput","backspaceRemovesValue","toggleButton","maxWidth","width","getButtonText","onInputChange","onMenuOpen","onMenuScrollToBottom","propTypes","promiseOption","func","any","pageSize","number","array","multiple","bool","defaultValue","oneOfType","object","isButton","buttonLabel","string","defaultProps","event","action","__arrangeOptions","optionsThatAreNotSelected","filter","indexOf","option","newOptions","prevOptions","offset","length","then","resolve","componentDidMount","map","push","arrangedOptions","index","data","splice","onClearAll","selectedValues","selectedItem","newState","updatedState","setTimeout","label","isDisabled","children","arg","isHidden","unshift","selectedItemsLength"],"mappings":"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","file":"asyncSelect.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '../Button';\nimport CheckBox from '../CheckBox';\nimport Icon from '../Icon';\nimport Select, { components } from 'react-select';\n\nconst initialCache = {\n  options: [],\n  hasMore: true,\n  isLoading: false\n};\n\nexport default class AsyncSelect extends Component {\n  static propTypes = {\n    promiseOption: PropTypes.func,\n    cacheUniq: PropTypes.any,\n    pageSize: PropTypes.number,\n    options: PropTypes.array,\n    multiple: PropTypes.bool,\n    defaultValue: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    isMulti: PropTypes.bool,\n    onChange: PropTypes.func,\n    isButton: PropTypes.bool,\n    buttonLabel: PropTypes.string,\n    buttonMaxWidth: PropTypes.number,\n    buttonWidth: PropTypes.number\n  };\n\n  static defaultProps = {\n    cacheUniq: null,\n    pageSize: 10,\n    isButton: false,\n    buttonLabel: 'filter'\n  };\n\n  constructor(props) {\n    super(props);\n    const initialOptionsCache = props.options\n      ? {\n          '': {\n            isLoading: false,\n            options: props.options || [],\n            hasMore: true\n          }\n        }\n      : {};\n    this.state = {\n      search: '',\n      optionsCache: initialOptionsCache,\n      selectedItems: [],\n      showSelectedValues: true,\n      menuIsOpen: false,\n      showButton: false,\n      showInput: false,\n      inputValue: ''\n    };\n  }\n\n  componentDidUpdate(oldProps) {\n    const { cacheUniq } = this.props;\n\n    if (oldProps.cacheUniq !== cacheUniq) {\n      this.setState({\n        optionsCache: {}\n      });\n    }\n  }\n\n  onInputChange = (search, event) => {\n    if (event.action == 'input-change') {\n      this.setState({\n        inputValue: search,\n        search\n      });\n    }\n\n    const { optionsCache } = this.state;\n\n    if (!optionsCache[search]) {\n      this.loadOptions();\n    }\n  };\n\n  onMenuScrollToBottom = async () => {\n    const { search, optionsCache } = this.state;\n\n    const currentOptions = optionsCache[search];\n\n    if (currentOptions) {\n      await this.loadOptions();\n    }\n  };\n\n  async loadOptions() {\n    const { search, optionsCache } = this.state;\n\n    const currentOptions = optionsCache[search] || initialCache;\n\n    if (currentOptions.isLoading || !currentOptions.hasMore) {\n      return;\n    }\n\n    await this.setState(prevState => ({\n      search,\n      optionsCache: {\n        ...prevState.optionsCache,\n        [search]: {\n          ...currentOptions,\n          isLoading: true\n        }\n      }\n    }));\n\n    try {\n      const loadOptions = this.__loadOptions;\n\n      const { options, hasMore } = await loadOptions(\n        search,\n        currentOptions.options\n      );\n\n      await this.setState(prevState => ({\n        optionsCache: {\n          ...prevState.optionsCache,\n          [search]: {\n            ...currentOptions,\n            options: currentOptions.options.concat(options),\n            hasMore: !!hasMore,\n            isLoading: false\n          }\n        }\n      }));\n    } catch (e) {\n      await this.setState(prevState => ({\n        optionsCache: {\n          ...prevState.optionsCache,\n          [search]: {\n            ...currentOptions,\n            isLoading: false\n          }\n        }\n      }));\n    }\n  }\n\n  __arrangeOptions = (selectedItems, options) => {\n    const optionsThatAreNotSelected = options.filter(option => {\n      return selectedItems.indexOf(option) < 0;\n    });\n    const newOptions = [...selectedItems, ...optionsThatAreNotSelected];\n    return newOptions;\n  };\n\n  __loadOptions = (search, prevOptions) => {\n    let { promiseOption, pageSize } = this.props;\n    return new Promise(resolve => {\n      let offset = prevOptions.length;\n      promiseOption({ search, offset, pageSize }).then(options => {\n        resolve({ options, hasMore: options.length === pageSize });\n      }, {});\n    });\n  };\n\n  componentDidMount = async () => {\n    const { defaultValue, isButton } = this.props;\n    const { optionsCache, search } = this.state;\n    const currentOptions = optionsCache[search] || initialCache;\n    if (isButton) {\n      this.setState({ showButton: true });\n    }\n    const selectedItems = [];\n    if (defaultValue) {\n      if (defaultValue.length) {\n        defaultValue.map(option => {\n          selectedItems.push(option);\n        });\n      } else {\n        selectedItems.push(defaultValue);\n      }\n    }\n\n    const arrangedOptions = this.__arrangeOptions(\n      selectedItems,\n      currentOptions.options\n    );\n    this.setState(prevState => ({\n      selectedItems,\n      optionsCache: {\n        ...prevState.optionsCache,\n        [search]: {\n          isLoading: false,\n          options: arrangedOptions,\n          hasMore: true\n        }\n      }\n    }));\n    if (!optionsCache[''] || optionsCache[''].hasMore) {\n      await this.loadOptions();\n    }\n  };\n\n  onCheckboxClick = data => {\n    const selectedItems = [...this.state.selectedItems];\n    let index = selectedItems.indexOf(data);\n    if (index < 0) {\n      selectedItems.push(data);\n    } else {\n      selectedItems.splice(index, 1);\n    }\n    this.setState({ selectedItems });\n  };\n\n  onClearAll = () => {\n    const selectedItems = [];\n    this.setState({ selectedItems });\n  };\n\n  onDone = () => {\n    const { selectedItems, optionsCache } = this.state;\n    const { isButton, onChange } = this.props;\n    const options = optionsCache[''].options;\n    const selectedValues = selectedItems.map(selectedItem => {\n      return selectedItem.value;\n    });\n    onChange(selectedValues);\n    const arrangedOptions = this.__arrangeOptions(selectedItems, options);\n    this.setState(prevState => {\n      let newState = {\n        menuIsOpen: false,\n        showSelectedValues: true,\n        showInput: false,\n        inputValue: '',\n        optionsCache: {\n          ...prevState.optionsCache,\n          '': {\n            ...prevState.optionsCache[''],\n            options: arrangedOptions\n          }\n        }\n      };\n      newState = isButton\n        ? Object.assign(newState, { showButton: true })\n        : newState;\n      return newState;\n    });\n  };\n\n  toggleButton = () => {\n    this.setState(prevState => {\n      let updatedState = {\n        showButton: !prevState.showButton,\n        menuIsOpen: !prevState.menuIsOpen,\n        showSelectedValues: !prevState.showSelectedValues\n      };\n      updatedState = !this.props.isButton\n        ? { showInput: !prevState.showInput }\n        : updatedState;\n      return updatedState;\n    });\n    setTimeout(() => {\n      this.props.isButton &&\n        this.setState({\n          showInput: !this.state.showInput\n        });\n    }, 0);\n  };\n\n  handleDisplayValue = ({ data }) => {\n    const { selectedItems } = this.state;\n    if (data.value == selectedItems[0].value)\n      return (\n        <div className=\"selectedItem\">{`${data.label}${\n          selectedItems.length > 1 ? `+${selectedItems.length - 1}` : ''\n        }`}</div>\n      );\n    return null;\n  };\n\n  optionWithCheckBox = ({ isDisabled, data }) => {\n    const { selectedItems } = this.state;\n    return !isDisabled ? (\n      <div\n        onClick={() => this.onCheckboxClick(data)}\n        className=\"checkboxWrapper\"\n      >\n        <CheckBox checked={selectedItems.indexOf(data) > -1 ? true : false} />\n        <span className=\"dataLabel\">{data.label}</span>\n      </div>\n    ) : null;\n  };\n\n  buildMenu = props => {\n    const { selectedItems } = this.state;\n    return (\n      <components.Menu {...props}>\n        {props.children}\n        <div className=\"componentWrapper\">\n          <div className=\"buttonWrapperL\">\n            <Button type=\"text\" onClick={this.onClearAll}>\n              {'Clear All'}\n            </Button>\n          </div>\n\n          <div className=\"buttonWrapperR\">\n            <Button type=\"text\" onClick={this.onDone}>\n              {`Done`}\n              <span className=\"doneMarginR\">\n                {selectedItems.length ? `(${selectedItems.length})` : ''}\n              </span>\n            </Button>\n          </div>\n        </div>\n      </components.Menu>\n    );\n  };\n\n  handleControl = arg => {\n    return (\n      <div className=\"selectBoxWrapper\">\n        <div\n          className={this.state.showInput ? 'activeSearch' : ''}\n          onClick={() => {\n            this.setState({\n              menuIsOpen: true,\n              showInput: true,\n              showSelectedValues: false\n            });\n          }}\n        >\n          <components.Control {...arg} />\n        </div>\n      </div>\n    );\n  };\n\n  handleInput = props => {\n    if (props.isHidden) {\n      return <components.Input {...props} />;\n    }\n    return (\n      <div className={props.value.length ? 'activeInput' : ''}>\n        <components.Input {...props} />\n        <Icon type=\"Cancel\" onClick={() => this.setState({ inputValue: '' })} />\n      </div>\n    );\n  };\n\n  normalizeOption = options => {\n    if (!this.props.isMulti && !this.state.search.length) {\n      options.unshift({ label: 'None', value: 'None' });\n    }\n    return options;\n  };\n\n  getButtonText = () => {\n    const { selectedItems } = this.state;\n    const { buttonLabel } = this.props;\n    const selectedItemsLength = selectedItems.length;\n    if (selectedItemsLength) {\n      if (selectedItemsLength == 1) return `${selectedItems[0].label}`;\n      return `${buttonLabel}.${selectedItems.length}`;\n    }\n    return buttonLabel;\n  };\n\n  render() {\n    const {\n      search,\n      optionsCache,\n      selectedItems,\n      showSelectedValues,\n      menuIsOpen,\n      showButton,\n      showInput,\n      inputValue\n    } = this.state;\n    const { isMulti, buttonMaxWidth, buttonWidth } = this.props;\n    let currentOptions = optionsCache[search] || initialCache;\n    const options = this.normalizeOption([...currentOptions.options]);\n    const selectProps = isMulti\n      ? {\n          onChange: this.onCheckboxClick,\n          hideSelectedOptions: false,\n          components: {\n            Option: this.optionWithCheckBox,\n            MultiValueContainer: this.handleDisplayValue,\n            Menu: this.buildMenu,\n            Control: this.handleControl\n          },\n          value: selectedItems,\n          closeMenuOnSelect: false,\n          controlShouldRenderValue: showSelectedValues,\n          menuIsOpen: menuIsOpen,\n          isSearchable: showInput,\n          autoFocus: showInput,\n          onBlur: this.onDone,\n          inputValue: inputValue\n        }\n      : {\n          components: {\n            Control: this.handleControl,\n            Input: this.handleInput\n          },\n          onChange: value => {\n            this.setState({ showInput: false });\n            this.props.onChange(value);\n          },\n          onBlur: () => this.setState({ showInput: false }),\n          backspaceRemovesValue: false\n        };\n\n    if (showButton) {\n      return (\n        <Button\n          onClick={this.toggleButton}\n          type=\"primary\"\n          style={{ maxWidth: buttonMaxWidth , width: buttonWidth}}\n        >\n          {this.getButtonText()}\n        </Button>\n      );\n    }\n\n    return (\n      <Select\n        {...this.props}\n        classNamePrefix={'mt-react-select'}\n        onInputChange={this.onInputChange}\n        isLoading={currentOptions.isLoading}\n        options={options}\n        onMenuOpen={this.onMenuOpen}\n        autoload={false}\n        onMenuScrollToBottom={this.onMenuScrollToBottom}\n        {...selectProps}\n      />\n    );\n  }\n}\n"]}