{"version":3,"sources":["../../src/SelectWithSearch/asyncSelect.js"],"names":["initialCache","options","hasMore","isLoading","AsyncSelect","props","initialOptionsCache","state","search","optionsCache","selectedItems","menuIsOpen","showSelect","showInput","inputValue","oldProps","cacheUniq","setState","currentOptions","prevState","loadOptions","__loadOptions","concat","document","removeEventListener","handleClickOutside","isMulti","isButton","buttonMaxWidth","buttonMinWidth","normalizeOption","selectProps","onChange","onCheckboxClick","hideSelectedOptions","components","Option","optionWithCheckBox","MultiValueContainer","handleDisplayValue","Menu","buildMenu","Control","handleControl","value","closeMenuOnSelect","controlShouldRenderValue","isSearchable","autoFocus","onBlur","onDone","SingleValue","handleSingleValue","data","isBlurActive","backspaceRemovesValue","e","buttonRef","toggleButton","maxWidth","minWidth","getButtonText","onInputChange","onMenuOpen","onMenuScrollToBottom","Component","propTypes","promiseOption","PropTypes","func","any","pageSize","number","array","multiple","bool","defaultValue","oneOfType","object","buttonLabel","string","placeholder","defaultProps","event","action","__arrangeOptions","optionsThatAreNotSelected","filter","indexOf","option","newOptions","prevOptions","offset","length","then","resolve","componentDidMount","map","push","arrangedOptions","addEventListener","contains","target","index","splice","onClearAll","selectedValues","selectedItem","newState","label","isDisabled","params","loaderStyle","position","bottom","left","children","arg","unshift","selectedItemsLength"],"mappings":"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","file":"asyncSelect.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '../Button';\nimport CheckBox from '../CheckBox';\nimport Icon from '../Icon';\nimport Loader from '../Loader';\nimport Select, { components } from 'react-select';\n\nconst initialCache = {\n  options: [],\n  hasMore: true,\n  isLoading: false\n};\n\nexport default class AsyncSelect extends Component {\n  static propTypes = {\n    promiseOption: PropTypes.func,\n    cacheUniq: PropTypes.any,\n    pageSize: PropTypes.number,\n    options: PropTypes.array,\n    multiple: PropTypes.bool,\n    defaultValue: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    isMulti: PropTypes.bool,\n    onChange: PropTypes.func,\n    isButton: PropTypes.bool,\n    buttonLabel: PropTypes.string,\n    placeholder: PropTypes.string,\n    buttonMaxWidth: PropTypes.number,\n    buttonMinWidth: PropTypes.number\n  };\n\n  static defaultProps = {\n    cacheUniq: null,\n    pageSize: 10,\n    isButton: false,\n    buttonLabel: 'filter'\n  };\n\n  constructor(props) {\n    super(props);\n    const initialOptionsCache = props.options\n      ? {\n          '': {\n            isLoading: false,\n            options: props.options || [],\n            hasMore: true\n          }\n        }\n      : {};\n    this.state = {\n      search: '',\n      optionsCache: initialOptionsCache,\n      selectedItems: [],\n      menuIsOpen: false,\n      showSelect: true,\n      showInput: false,\n      inputValue: ''\n    };\n  }\n\n  componentDidUpdate(oldProps) {\n    const { cacheUniq } = this.props;\n\n    if (oldProps.cacheUniq !== cacheUniq) {\n      this.setState({\n        optionsCache: {}\n      });\n    }\n  }\n\n  onInputChange = (search, event) => {\n    if (event.action == 'input-change') {\n      this.setState({\n        inputValue: search,\n        search\n      });\n    }\n\n    const { optionsCache } = this.state;\n\n    if (!optionsCache[search]) {\n      this.loadOptions();\n    }\n  };\n\n  onMenuScrollToBottom = async () => {\n    const { search, optionsCache } = this.state;\n\n    const currentOptions = optionsCache[search];\n\n    if (currentOptions) {\n      await this.loadOptions();\n    }\n  };\n\n  async loadOptions() {\n    const { search, optionsCache } = this.state;\n\n    const currentOptions = optionsCache[search] || initialCache;\n\n    if (currentOptions.isLoading || !currentOptions.hasMore) {\n      return;\n    }\n\n    await this.setState(prevState => ({\n      search,\n      optionsCache: {\n        ...prevState.optionsCache,\n        [search]: {\n          ...currentOptions,\n          isLoading: true\n        }\n      }\n    }));\n\n    try {\n      const loadOptions = this.__loadOptions;\n\n      const { options, hasMore } = await loadOptions(\n        search,\n        currentOptions.options\n      );\n\n      await this.setState(prevState => ({\n        optionsCache: {\n          ...prevState.optionsCache,\n          [search]: {\n            ...currentOptions,\n            options: currentOptions.options.concat(options),\n            hasMore: !!hasMore,\n            isLoading: false\n          }\n        }\n      }));\n    } catch (e) {\n      await this.setState(prevState => ({\n        optionsCache: {\n          ...prevState.optionsCache,\n          [search]: {\n            ...currentOptions,\n            isLoading: false\n          }\n        }\n      }));\n    }\n  }\n\n  __arrangeOptions = (selectedItems, options) => {\n    const optionsThatAreNotSelected = options.filter(option => {\n      return selectedItems.indexOf(option) < 0;\n    });\n    const newOptions = [...selectedItems, ...optionsThatAreNotSelected];\n    return newOptions;\n  };\n\n  __loadOptions = (search, prevOptions) => {\n    let { promiseOption, pageSize } = this.props;\n    return new Promise(resolve => {\n      let offset = prevOptions.length;\n      promiseOption({ search, offset, pageSize }).then(options => {\n        resolve({ options, hasMore: options.length === pageSize });\n      }, {});\n    });\n  };\n\n  componentDidMount = async () => {\n    const { defaultValue, isButton } = this.props;\n    const { optionsCache, search } = this.state;\n    const currentOptions = optionsCache[search] || initialCache;\n    if (isButton) {\n      this.setState({ showSelect: false });\n    }\n    const selectedItems = [];\n    if (defaultValue) {\n      if (defaultValue.length) {\n        defaultValue.map(option => {\n          selectedItems.push(option);\n        });\n      } else {\n        selectedItems.push(defaultValue);\n      }\n    }\n\n    const arrangedOptions = this.__arrangeOptions(\n      selectedItems,\n      currentOptions.options\n    );\n    this.setState(prevState => ({\n      selectedItems,\n      optionsCache: {\n        ...prevState.optionsCache,\n        [search]: {\n          isLoading: false,\n          options: arrangedOptions,\n          hasMore: true\n        }\n      }\n    }));\n    if (!optionsCache[''] || optionsCache[''].hasMore) {\n      await this.loadOptions();\n    }\n    document.addEventListener('mousedown', this.handleClickOutside);\n  };\n  handleClickOutside = event => {\n    if (this.buttonRef && this.buttonRef.contains(event.target)) {\n      this.isBlurActive = false;\n    }\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleClickOutside);\n  }\n\n  onCheckboxClick = data => {\n    const selectedItems = [...this.state.selectedItems];\n    let index = selectedItems.indexOf(data);\n    if (index < 0) {\n      selectedItems.push(data);\n    } else {\n      selectedItems.splice(index, 1);\n    }\n    this.setState({ selectedItems });\n  };\n\n  onClearAll = () => {\n    const selectedItems = [];\n    this.setState({ selectedItems });\n  };\n\n  onDone = () => {\n    this.isBlurActive = true;\n    const { selectedItems, optionsCache } = this.state;\n    const { isButton, onChange } = this.props;\n    const options = optionsCache[''].options;\n    const selectedValues = selectedItems.map(selectedItem => {\n      return selectedItem.value;\n    });\n    onChange(selectedValues);\n    const arrangedOptions = this.__arrangeOptions(selectedItems, options);\n    this.setState(prevState => {\n      let newState = {\n        menuIsOpen: false,\n        showInput: false,\n        inputValue: '',\n        optionsCache: {\n          ...prevState.optionsCache,\n          '': {\n            ...prevState.optionsCache[''],\n            options: arrangedOptions\n          }\n        }\n      };\n      newState = isButton\n        ? Object.assign(newState, { showSelect: false })\n        : newState;\n      return newState;\n    });\n  };\n\n  toggleButton = () => {\n    if (this.isBlurActive) {\n      this.isBlurActive = false;\n      return;\n    }\n    this.setState(prevState => ({\n      showSelect: !prevState.showSelect,\n      menuIsOpen: !prevState.menuIsOpen,\n      showInput: !prevState.showInput\n    }));\n  };\n\n  handleDisplayValue = ({ data }) => {\n    const { selectedItems } = this.state;\n    if (data.value == selectedItems[0].value)\n      return (\n        <div className=\"selectedItem clearfix\">\n          <span className=\"selectedItemLabel floatL\">{`${data.label}`}</span>\n          <span className=\"floatL\">{`${\n            selectedItems.length > 1 ? `+${selectedItems.length - 1}` : ''\n          }`}</span>\n        </div>\n      );\n    return null;\n  };\n\n  handleSingleValue = ({ data, ...props }) => {\n    const { placeholder } = this.props;\n    return (\n      <components.SingleValue {...props}>\n        {data.value == 'None' ? placeholder : data.label}\n      </components.SingleValue>\n    );\n  };\n\n  optionWithCheckBox = params => {\n    const { isDisabled, data } = params;\n    const { selectedItems } = this.state;\n    if (!this.props.isMulti)\n      return (\n        <div title={data.label}>\n          <components.Option {...params} />\n        </div>\n      );\n    return !isDisabled ? (\n      <div\n        onClick={() => this.onCheckboxClick(data)}\n        className=\"checkboxWrapper\"\n        title={data.label}\n      >\n        <CheckBox checked={selectedItems.indexOf(data) > -1 ? true : false} />\n        <span className=\"dataLabel\">{data.label}</span>\n      </div>\n    ) : null;\n  };\n\n  buildMenu = props => {\n    const { selectedItems, search, optionsCache } = this.state;\n    const isLoading = optionsCache[search] && optionsCache[search].isLoading;\n    const { isMulti } = this.props;\n    let loaderStyle = {\n      position: 'absolute',\n      bottom: isMulti ? 30 : 0,\n      left: '50%'\n    };\n    return (\n      <components.Menu {...props}>\n        {props.children}\n        {!!isLoading && (\n          <Loader size={'sizeXSmall'} vCenter={false} style={loaderStyle} />\n        )}\n        {isMulti && (\n          <div className=\"componentWrapper\">\n            <div className=\"buttonWrapperL\">\n              <Button type=\"text\" onClick={this.onClearAll}>\n                {'Clear All'}\n              </Button>\n            </div>\n\n            <div className=\"buttonWrapperR\">\n              <Button type=\"text\" onClick={this.onDone}>\n                {`Done`}\n                <span className=\"doneMarginR\">\n                  {selectedItems.length ? `(${selectedItems.length})` : ''}\n                </span>\n              </Button>\n            </div>\n          </div>\n        )}\n      </components.Menu>\n    );\n  };\n\n  handleControl = arg => {\n    const { inputValue } = this.state;\n    return (\n      <div className=\"selectBoxWrapper\">\n        <div\n          className={this.state.showInput ? 'activeSearch' : ''}\n          onClick={() => {\n            this.setState({\n              menuIsOpen: true,\n              showInput: true\n            });\n          }}\n        >\n          <components.Control {...arg} />\n          <div className={inputValue.length ? 'activeInput' : ''}>\n            <Icon\n              type=\"cross\"\n              onClick={() => this.setState({ inputValue: '' })}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  normalizeOption = options => {\n    if (!this.props.isMulti && !this.state.search.length) {\n      options.unshift({ label: 'None', value: 'None' });\n    }\n    return options;\n  };\n\n  getButtonText = () => {\n    const { selectedItems } = this.state;\n    const { buttonLabel } = this.props;\n    const selectedItemsLength = selectedItems.length;\n    if (selectedItemsLength) {\n      if (selectedItemsLength == 1)\n        return `${\n          selectedItems[0].label == 'None'\n            ? buttonLabel\n            : selectedItems[0].label\n        }`;\n      return `${buttonLabel}.${selectedItems.length}`;\n    }\n    return buttonLabel;\n  };\n\n  render() {\n    const {\n      search,\n      optionsCache,\n      selectedItems,\n      menuIsOpen,\n      showSelect,\n      showInput,\n      inputValue\n    } = this.state;\n    const { isMulti, isButton, buttonMaxWidth, buttonMinWidth } = this.props;\n    let currentOptions = optionsCache[search] || initialCache;\n    const options = this.normalizeOption([...currentOptions.options]);\n    const selectProps = isMulti\n      ? {\n          onChange: this.onCheckboxClick,\n          hideSelectedOptions: false,\n          components: {\n            Option: this.optionWithCheckBox,\n            MultiValueContainer: this.handleDisplayValue,\n            Menu: this.buildMenu,\n            Control: this.handleControl\n          },\n          value: selectedItems,\n          closeMenuOnSelect: false,\n          controlShouldRenderValue: !showInput,\n          menuIsOpen: menuIsOpen,\n          isSearchable: showInput,\n          autoFocus: showInput,\n          onBlur: this.onDone,\n          inputValue: inputValue\n        }\n      : {\n          components: {\n            Option: this.optionWithCheckBox,\n            Control: this.handleControl,\n            SingleValue: this.handleSingleValue,\n            Menu: this.buildMenu\n          },\n          onChange: data => {\n            this.setState({\n              showInput: false,\n              selectedItems: [data],\n              menuIsOpen: false,\n              showSelect: !isButton\n            });\n            this.props.onChange(data.value);\n          },\n          onBlur: () => {\n            this.isBlurActive = true;\n            this.setState({\n              showInput: false,\n              menuIsOpen: false,\n              showSelect: !isButton\n            });\n          },\n          autoFocus: showInput,\n          backspaceRemovesValue: false,\n          controlShouldRenderValue: !showInput,\n          menuIsOpen: menuIsOpen\n        };\n\n    return (\n      <div>\n        {isButton && (\n          <div\n            ref={e => {\n              if (e) {\n                this.buttonRef = e;\n              }\n            }}\n          >\n            <Button\n              type=\"secondary\"\n              onClick={this.toggleButton}\n              style={{ maxWidth: buttonMaxWidth, minWidth: buttonMinWidth }}\n            >\n              {this.getButtonText()}\n            </Button>\n          </div>\n        )}\n        {showSelect && (\n          <Select\n            {...this.props}\n            classNamePrefix={'mt-react-select'}\n            onInputChange={this.onInputChange}\n            options={options}\n            onMenuOpen={this.onMenuOpen}\n            autoload={false}\n            onMenuScrollToBottom={this.onMenuScrollToBottom}\n            {...selectProps}\n          />\n        )}\n      </div>\n    );\n  }\n}\n"]}